/*!/*@nomin*/
module.exports=function(e){function t(t){for(var r,o,c=t[0],u=t[1],s=t[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={init:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;return a.push(["9908","chunk-vendors"]),n()}({"466d":function(e,t,n){"use strict";var r=n("d784"),i=n("825a"),a=n("50c4"),o=n("577e"),c=n("1d80"),u=n("dc4a"),s=n("8aa5"),l=n("14c3");r("match",(function(e,t,n){return[function(t){var n=c(this),r=null==t?void 0:u(t,e);return r?r.call(t,n):new RegExp(t)[e](o(n))},function(e){var r=i(this),c=o(e),u=n(t,r,c);if(u.done)return u.value;if(!r.global)return l(r,c);var d=r.unicode;r.lastIndex=0;for(var f,p=[],h=0;null!==(f=l(r,c));){var g=o(f[0]);p[h]=g,""===g&&(r.lastIndex=s(c,a(r.lastIndex),d)),h++}return 0===h?null:p}]}))},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),a=n("94ca"),o=n("7156"),c=n("9112"),u=n("9bf2").f,s=n("241c").f,l=n("44e7"),d=n("577e"),f=n("ad6d"),p=n("9f7f"),h=n("6eeb"),g=n("d039"),v=n("1a2d"),m=n("69f3").enforce,w=n("2626"),b=n("b622"),y=n("fce3"),E=n("107c"),k=b("match"),T=i.RegExp,O=T.prototype,_=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,I=/a/g,R=new T(x)!==x,D=p.UNSUPPORTED_Y,P=r&&(!R||D||y||E||g((function(){return I[k]=!1,T(x)!=x||T(I)==I||"/a/i"!=T(x,"i")}))),N=function(e){for(var t,n=e.length,r=0,i="",a=[],o={},c=!1,u=!1,s=0,l="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)c=!1;else if(!c)switch(!0){case"["===t:c=!0;break;case"("===t:_.test(e.slice(r+1))&&(r+=2,u=!0),i+=t,s++;continue;case">"===t&&u:if(""===l||v(o,l))throw new SyntaxError("Invalid capture group name");o[l]=!0,a.push([l,s]),u=!1,l="";continue}u?l+=t:i+=t}return[i,a]};if(a("RegExp",P)){for(var j=function(e,t){var n,r,i,a,u,s,p=this instanceof j,h=l(e),g=void 0===t,v=[],w=e;if(!p&&h&&g&&e.constructor===j)return e;if((h||e instanceof j)&&(e=e.source,g&&(t="flags"in w?w.flags:f.call(w))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),w=e,y&&"dotAll"in x&&((r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,""))),n=t,D&&"sticky"in x&&((i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""))),E&&(e=(a=N(e))[0],v=a[1]),u=o(T(e,t),p?this:O,j),(r||i||v.length)&&(s=m(u),r&&(s.dotAll=!0,s.raw=j(function(e){for(var t,n=e.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++r);return i}(e),n)),i&&(s.sticky=!0),v.length&&(s.groups=v)),e!==w)try{c(u,"source",""===w?"(?:)":w)}catch(e){}return u},A=function(e){e in j||u(j,e,{configurable:!0,get:function(){return T[e]},set:function(t){T[e]=t}})},L=s(T),S=0;L.length>S;)A(L[S++]);O.constructor=j,j.prototype=O,h(i,"RegExp",j)}w("RegExp")},5700:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var r,i,a=n("5530");(function(e){e.saved="saved",e.cancel="cancel",e.reload="reload"})(r||(r={})),function(e){e.relaunch="relaunch"}(i||(i={})),t.b=Object(a.a)(Object(a.a)({},r),i)},"857a":function(e,t,n){var r=n("1d80"),i=n("577e"),a=/"/g;e.exports=function(e,t,n,o){var c=i(r(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+i(o).replace(a,"&quot;")+'"'),u+">"+c+"</"+t+">"}},9908:function(e,t,n){"use strict";n.r(t),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,i=n("1da1"),a=(n("4160"),n("159b"),n("9911"),n("96cf"),n("5530")),o=n("d4ec"),c=n("bee2");n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("caad"),n("2532"),n("07ac"),n("a630"),n("3ca3"),n("d81d"),n("4de4"),function(e){e.SINGLE_BEST_VALUE="single-best-value"}(r||(r={}));var u=r,s=function(){function e(t){Object(o.a)(this,e),this.ENTITY_ID_REGEX_INDEX=2,this.PROPERTY_ID_REGEX_INDEX=3,this.ENTITY_TITLE_REGEX_INDEX=1,this.hrefRegExp=new RegExp(t)}return Object(c.a)(e,[{key:"extractDataFromLink",value:function(e){var t=e.href.match(this.hrefRegExp);return t&&t[this.ENTITY_ID_REGEX_INDEX]&&t[this.PROPERTY_ID_REGEX_INDEX]&&t[this.ENTITY_TITLE_REGEX_INDEX]?{entityId:t[this.ENTITY_ID_REGEX_INDEX],propertyId:t[this.PROPERTY_ID_REGEX_INDEX],entityTitle:t[this.ENTITY_TITLE_REGEX_INDEX]}:null}},{key:"validateEditFlow",value:function(e){return e&&Object.values(u).includes(e)?e:null}},{key:"getEditFlowFromParent",value:function(e){return 1!==e.querySelectorAll("a").length?null:this.validateEditFlow(e.dataset.bridgeEditFlow)}},{key:"extractDataFromElement",value:function(e){var t=this.getEditFlowFromParent(e.parentElement);if(!t)return null;var n=this.extractDataFromLink(e);return null===n?null:Object(a.a)(Object(a.a)({},n),{},{link:e,editFlow:t})}},{key:"selectElementsToOverload",value:function(){var e=this;return Array.from(document.querySelectorAll("[data-bridge-edit-flow] > a")).map((function(t){return e.extractDataFromElement(t)})).filter((function(e){return null!==e}))}}]),e}();n("b0c0");var l=n("5700");var d=function(){function e(t,n,r,i){Object(o.a)(this,e),this.mwWindow=t,this.app=n,this.dataBridgeConfig=r,this.eventTracker=i}return Object(c.a)(e,[{key:"dispatch",value:function(t){var n=function(e,t,n){var r=function e(t){e.parent.call(this,t)};e.inheritClass(r,e.ui.Dialog),r.static.name="data-bridge",r.static.escapable=!1,r.prototype.initialize=function(){r.parent.prototype.initialize.call(this),this.content=new e.ui.PanelLayout({padded:!1,expanded:!1}),this.content.$element.append('<div id="'.concat(n,'"></div>')),this.$body.append(this.content.$element)},r.prototype.getBodyHeight=function(){return 448};var i=new r({classes:["wb-db-dialog"],size:"medium"}),a=new e.ui.WindowManager;return t(document.body).append(a.$element),a.addWindows([i]),a.openWindow(i),i}(this.mwWindow.OO,this.mwWindow.$,e.APP_DOM_CONTAINER_ID);!function(e,t,n){e.on(l.c.saved,(function(){n.location.reload()})),e.on(l.c.cancel,(function(){t.clearWindows().catch((function(){}))})),e.on(l.c.reload,(function(){n.location.reload()})),t.on("closing",(function(e,n){n.then((function(){t.destroy()}),(function(e){t.destroy()}))}))}(this.app.launch({containerSelector:"#".concat(e.APP_DOM_CONTAINER_ID)},{pageTitle:this.mwWindow.mw.config.get("wgPageName"),entityId:t.entityId,propertyId:t.propertyId,entityTitle:t.entityTitle,editFlow:t.editFlow,client:{usePublish:this.dataBridgeConfig.usePublish,issueReportingLink:this.dataBridgeConfig.issueReportingLink},originalHref:t.link.href,pageUrl:this.mwWindow.location.href,userName:this.mwWindow.mw.config.get("wgUserName")},this.app.createServices(this.mwWindow,this.dataBridgeConfig.editTags,this.eventTracker)),n.getManager(),this.mwWindow)}}]),e}();d.APP_DOM_CONTAINER_ID="data-bridge-container";var f=function(){function e(t){Object(o.a)(this,e),this.tracker=t}return Object(c.a)(e,[{key:"increment",value:function(e){this.tracker("counter.".concat(e),1)}},{key:"recordTiming",value:function(e,t){this.tracker("timing.".concat(e),t)}}]),e}(),p=function(){function e(t,n,r){Object(o.a)(this,e),this.tracker=t,this.performance=n,this.visibilityApi=r}return Object(c.a)(e,[{key:"startClickDelayTracker",value:function(){var e=this,t=this.performance.now();return function(){var n=e.performance.now()-t;e.tracker.recordTiming("clickDelay",n)}}},{key:"recordTimeToLinkListenersAttached",value:function(){if(!this.isTabInBackground()){var e=this.performance.now();if(this.performance.getEntriesByName&&0!==this.performance.getEntriesByName("mwStartup").length){var t=this.performance.getEntriesByName("mwStartup")[0];this.tracker.recordTiming("timeToLinkListenersAttached",e-t.startTime)}}}},{key:"isTabInBackground",value:function(){return this.visibilityApi.hidden||this.visibilityApi.msHidden||this.visibilityApi.webkitHidden}}]),e}(),h=(n("99af"),function(){function e(t,n){Object(o.a)(this,e),this.tracker=t,this.trackingTopicPrefix=n}return Object(c.a)(e,[{key:"increment",value:function(e){this.tracker.increment("".concat(this.trackingTopicPrefix,".").concat(e))}},{key:"recordTiming",value:function(e,t){this.tracker.recordTiming("".concat(this.trackingTopicPrefix,".").concat(e),t)}}]),e}()),g="wikibase.client.data-bridge.app";function v(e){e.preventDefault(),e.stopPropagation()}var m=Object(i.a)(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,null!==(n=t.mw.config.get("wbDataBridgeConfig")).hrefRegExp){e.next=4;break}return t.mw.log.warn("data bridge config incomplete: dataBridgeHrefRegExp missing"),e.abrupt("return");case 4:if(r=new s(n.hrefRegExp),!((a=r.selectElementsToOverload()).length>0)){e.next=14;break}return o=new h(new f(t.mw.track),"MediaWiki.wikibase.client.databridge"),c=t.mw.loader.using([g,"mw.config.values.wbRepo","mediawiki.ForeignApi","mediawiki.api","jquery.uls.data","mediawiki.language"]).then(function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(g);case 2:return i=e.sent,e.abrupt("return",new d(t,i,n,o));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=new p(o,window.performance,window.document),a.forEach((function(e){var t=!1;e.link.setAttribute("aria-haspopup","dialog"),e.link.addEventListener("click",function(){var n=Object(i.a)(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r.altKey||r.ctrlKey||r.shiftKey||r.metaKey)){n.next=2;break}return n.abrupt("return");case 2:if(v(r),!t){n.next=5;break}return n.abrupt("return");case 5:return t=!0,i=u.startClickDelayTracker(),n.next=9,c;case 9:n.sent.dispatch(e),i(),t=!1;case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),u.recordTimeToLinkListenersAttached(),e.next=14,c;case 14:case"end":return e.stop()}}),e)})));"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m()},9911:function(e,t,n){"use strict";var r=n("23e7"),i=n("857a");r({target:"String",proto:!0,forced:n("af03")("link")},{link:function(e){return i(this,"a","href",e)}})},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}});