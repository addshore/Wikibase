/*!/*@nomin*/
module.exports=function(e){function t(t){for(var r,o,c=t[0],u=t[1],s=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={init:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;return a.push(["9908","chunk-vendors"]),n()}({"466d":function(e,t,n){"use strict";var r=n("c65b"),i=n("d784"),a=n("825a"),o=n("50c4"),c=n("577e"),u=n("1d80"),s=n("dc4a"),l=n("8aa5"),f=n("14c3");i("match",(function(e,t,n){return[function(t){var n=u(this),i=null==t?void 0:s(t,e);return i?r(i,t,n):new RegExp(t)[e](c(n))},function(e){var r=a(this),i=c(e),u=n(t,r,i);if(u.done)return u.value;if(!r.global)return f(r,i);var s=r.unicode;r.lastIndex=0;for(var d,p=[],h=0;null!==(d=f(r,i));){var g=c(d[0]);p[h]=g,""===g&&(r.lastIndex=l(i,o(r.lastIndex),s)),h++}return 0===h?null:p}]}))},"4d63":function(e,t,n){var r=n("83ab"),i=n("da84"),a=n("e330"),o=n("94ca"),c=n("7156"),u=n("9112"),s=n("9bf2").f,l=n("241c").f,f=n("3a9b"),d=n("44e7"),p=n("577e"),h=n("ad6d"),g=n("9f7f"),v=n("6eeb"),m=n("d039"),w=n("1a2d"),b=n("69f3").enforce,y=n("2626"),E=n("b622"),k=n("fce3"),T=n("107c"),_=E("match"),I=i.RegExp,O=I.prototype,x=i.SyntaxError,R=a(h),D=a(O.exec),P=a("".charAt),N=a("".replace),j=a("".indexOf),A=a("".slice),S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,L=/a/g,X=/a/g,F=new I(L)!==L,C=g.MISSED_STICKY,B=g.UNSUPPORTED_Y,W=r&&(!F||C||k||T||m((function(){return X[_]=!1,I(L)!=L||I(X)==X||"/a/i"!=I(L,"i")})));if(o("RegExp",W)){for(var M=function(e,t){var n,r,i,a,o,s,l=f(O,this),h=d(e),g=void 0===t,v=[],m=e;if(!l&&h&&g&&e.constructor===M)return e;if((h||f(O,e))&&(e=e.source,g&&(t="flags"in m?m.flags:R(m))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),m=e,k&&"dotAll"in L&&((r=!!t&&j(t,"s")>-1)&&(t=N(t,/s/g,""))),n=t,C&&"sticky"in L&&((i=!!t&&j(t,"y")>-1)&&B&&(t=N(t,/y/g,""))),T&&(e=(a=function(e){for(var t,n=e.length,r=0,i="",a=[],o={},c=!1,u=!1,s=0,l="";r<=n;r++){if("\\"===(t=P(e,r)))t+=P(e,++r);else if("]"===t)c=!1;else if(!c)switch(!0){case"["===t:c=!0;break;case"("===t:D(S,A(e,r+1))&&(r+=2,u=!0),i+=t,s++;continue;case">"===t&&u:if(""===l||w(o,l))throw new x("Invalid capture group name");o[l]=!0,a[a.length]=[l,s],u=!1,l="";continue}u?l+=t:i+=t}return[i,a]}(e))[0],v=a[1]),o=c(I(e,t),l?this:O,M),(r||i||v.length)&&(s=b(o),r&&(s.dotAll=!0,s.raw=M(function(e){for(var t,n=e.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(t=P(e,r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+P(e,++r);return i}(e),n)),i&&(s.sticky=!0),v.length&&(s.groups=v)),e!==m)try{u(o,"source",""===m?"(?:)":m)}catch(e){}return o},Y=function(e){e in M||s(M,e,{configurable:!0,get:function(){return I[e]},set:function(t){I[e]=t}})},G=l(I),H=0;G.length>H;)Y(G[H++]);O.constructor=M,M.prototype=O,v(i,"RegExp",M)}y("RegExp")},5700:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var r,i,a=n("5530");(function(e){e.saved="saved",e.cancel="cancel",e.reload="reload"})(r||(r={})),function(e){e.relaunch="relaunch"}(i||(i={})),t.b=Object(a.a)(Object(a.a)({},r),i)},"857a":function(e,t,n){var r=n("e330"),i=n("1d80"),a=n("577e"),o=/"/g,c=r("".replace);e.exports=function(e,t,n,r){var u=a(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+c(a(r),o,"&quot;")+'"'),s+">"+u+"</"+t+">"}},9908:function(e,t,n){"use strict";n.r(t),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,i=n("1da1"),a=(n("4160"),n("159b"),n("9911"),n("96cf"),n("5530")),o=n("d4ec"),c=n("bee2");n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("caad"),n("2532"),n("07ac"),n("a630"),n("3ca3"),n("d81d"),n("4de4"),function(e){e.SINGLE_BEST_VALUE="single-best-value"}(r||(r={}));var u=r,s=function(){function e(t){Object(o.a)(this,e),this.ENTITY_ID_REGEX_INDEX=2,this.PROPERTY_ID_REGEX_INDEX=3,this.ENTITY_TITLE_REGEX_INDEX=1,this.hrefRegExp=new RegExp(t)}return Object(c.a)(e,[{key:"extractDataFromLink",value:function(e){var t=e.href.match(this.hrefRegExp);return t&&t[this.ENTITY_ID_REGEX_INDEX]&&t[this.PROPERTY_ID_REGEX_INDEX]&&t[this.ENTITY_TITLE_REGEX_INDEX]?{entityId:t[this.ENTITY_ID_REGEX_INDEX],propertyId:t[this.PROPERTY_ID_REGEX_INDEX],entityTitle:t[this.ENTITY_TITLE_REGEX_INDEX]}:null}},{key:"validateEditFlow",value:function(e){return e&&Object.values(u).includes(e)?e:null}},{key:"getEditFlowFromParent",value:function(e){return 1!==e.querySelectorAll("a").length?null:this.validateEditFlow(e.dataset.bridgeEditFlow)}},{key:"extractDataFromElement",value:function(e){var t=this.getEditFlowFromParent(e.parentElement);if(!t)return null;var n=this.extractDataFromLink(e);return null===n?null:Object(a.a)(Object(a.a)({},n),{},{link:e,editFlow:t})}},{key:"selectElementsToOverload",value:function(){var e=this;return Array.from(document.querySelectorAll("[data-bridge-edit-flow] > a")).map((function(t){return e.extractDataFromElement(t)})).filter((function(e){return null!==e}))}}]),e}();n("b0c0");var l=n("5700");var f=function(){function e(t,n,r,i){Object(o.a)(this,e),this.mwWindow=t,this.app=n,this.dataBridgeConfig=r,this.eventTracker=i}return Object(c.a)(e,[{key:"dispatch",value:function(t){var n=function(e,t,n){var r=function e(t){e.parent.call(this,t)};e.inheritClass(r,e.ui.Dialog),r.static.name="data-bridge",r.static.escapable=!1,r.prototype.initialize=function(){r.parent.prototype.initialize.call(this),this.content=new e.ui.PanelLayout({padded:!1,expanded:!1}),this.content.$element.attr("id",n),this.$body.append(this.content.$element)},r.prototype.getBodyHeight=function(){return 448};var i=new r({classes:["wb-db-dialog"],size:"medium"}),a=new e.ui.WindowManager;return t(document.body).append(a.$element),a.addWindows([i]),a.openWindow(i),i}(this.mwWindow.OO,this.mwWindow.$,e.APP_DOM_CONTAINER_ID);!function(e,t,n){e.on(l.c.saved,(function(){n.location.reload()})),e.on(l.c.cancel,(function(){t.clearWindows().catch((function(){}))})),e.on(l.c.reload,(function(){n.location.reload()})),t.on("closing",(function(e,n){n.then((function(){t.destroy()}),(function(e){t.destroy()}))}))}(this.app.launch({containerSelector:"#".concat(e.APP_DOM_CONTAINER_ID)},{pageTitle:this.mwWindow.mw.config.get("wgPageName"),entityId:t.entityId,propertyId:t.propertyId,entityTitle:t.entityTitle,editFlow:t.editFlow,client:{usePublish:this.dataBridgeConfig.usePublish,issueReportingLink:this.dataBridgeConfig.issueReportingLink},originalHref:t.link.href,pageUrl:this.mwWindow.location.href,userName:this.mwWindow.mw.config.get("wgUserName")},this.app.createServices(this.mwWindow,this.dataBridgeConfig.editTags,this.eventTracker)),n.getManager(),this.mwWindow)}}]),e}();f.APP_DOM_CONTAINER_ID="data-bridge-container";var d=function(){function e(t){Object(o.a)(this,e),this.tracker=t}return Object(c.a)(e,[{key:"increment",value:function(e){this.tracker("counter.".concat(e),1)}},{key:"recordTiming",value:function(e,t){this.tracker("timing.".concat(e),t)}}]),e}(),p=function(){function e(t,n,r){Object(o.a)(this,e),this.tracker=t,this.performance=n,this.visibilityApi=r}return Object(c.a)(e,[{key:"startClickDelayTracker",value:function(){var e=this,t=this.performance.now();return function(){var n=e.performance.now()-t;e.tracker.recordTiming("clickDelay",n)}}},{key:"recordTimeToLinkListenersAttached",value:function(){if(!this.isTabInBackground()){var e=this.performance.now();if(this.performance.getEntriesByName&&0!==this.performance.getEntriesByName("mwStartup").length){var t=this.performance.getEntriesByName("mwStartup")[0];this.tracker.recordTiming("timeToLinkListenersAttached",e-t.startTime)}}}},{key:"isTabInBackground",value:function(){return this.visibilityApi.hidden||this.visibilityApi.msHidden||this.visibilityApi.webkitHidden}}]),e}(),h=(n("99af"),function(){function e(t,n){Object(o.a)(this,e),this.tracker=t,this.trackingTopicPrefix=n}return Object(c.a)(e,[{key:"increment",value:function(e){this.tracker.increment("".concat(this.trackingTopicPrefix,".").concat(e))}},{key:"recordTiming",value:function(e,t){this.tracker.recordTiming("".concat(this.trackingTopicPrefix,".").concat(e),t)}}]),e}()),g="wikibase.client.data-bridge.app";function v(e){e.preventDefault(),e.stopPropagation()}var m=Object(i.a)(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,null!==(n=t.mw.config.get("wbDataBridgeConfig")).hrefRegExp){e.next=4;break}return t.mw.log.warn("data bridge config incomplete: dataBridgeHrefRegExp missing"),e.abrupt("return");case 4:if(r=new s(n.hrefRegExp),!((a=r.selectElementsToOverload()).length>0)){e.next=14;break}return o=new h(new d(t.mw.track),"MediaWiki.wikibase.client.databridge"),c=t.mw.loader.using([g,"mw.config.values.wbRepo","mediawiki.ForeignApi","mediawiki.api","jquery.uls.data","mediawiki.language"]).then(function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(g);case 2:return i=e.sent,e.abrupt("return",new f(t,i,n,o));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=new p(o,window.performance,window.document),a.forEach((function(e){var t=!1;e.link.setAttribute("aria-haspopup","dialog"),e.link.addEventListener("click",function(){var n=Object(i.a)(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r.altKey||r.ctrlKey||r.shiftKey||r.metaKey)){n.next=2;break}return n.abrupt("return");case 2:if(v(r),!t){n.next=5;break}return n.abrupt("return");case 5:return t=!0,i=u.startClickDelayTracker(),n.next=9,c;case 9:n.sent.dispatch(e),i(),t=!1;case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),u.recordTimeToLinkListenersAttached(),e.next=14,c;case 14:case"end":return e.stop()}}),e)})));"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m()},9911:function(e,t,n){"use strict";var r=n("23e7"),i=n("857a");r({target:"String",proto:!0,forced:n("af03")("link")},{link:function(e){return i(this,"a","href",e)}})},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}});