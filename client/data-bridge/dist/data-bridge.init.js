/*!/*@nomin*/(()=>{var e,t={4817:(e,t,i)=>{"use strict";i.r(t),i(8674),i(7727);var r,n=i(6198),o=i(3019);i(4603),i(8450),i(4916),i(2479),function(e){e.SINGLE_BEST_VALUE="single-best-value"}(r||(r={}));var a,c,s=r;class l{constructor(e){this.ENTITY_ID_REGEX_INDEX=2,this.PROPERTY_ID_REGEX_INDEX=3,this.ENTITY_TITLE_REGEX_INDEX=1,this.hrefRegExp=new RegExp(e)}extractDataFromLink(e){const t=e.href.match(this.hrefRegExp);return t&&t[this.ENTITY_ID_REGEX_INDEX]&&t[this.PROPERTY_ID_REGEX_INDEX]&&t[this.ENTITY_TITLE_REGEX_INDEX]?{entityId:t[this.ENTITY_ID_REGEX_INDEX],propertyId:t[this.PROPERTY_ID_REGEX_INDEX],entityTitle:t[this.ENTITY_TITLE_REGEX_INDEX]}:null}validateEditFlow(e){return e&&Object.values(s).includes(e)?e:null}getEditFlowFromParent(e){return 1!==e.querySelectorAll("a").length?null:this.validateEditFlow(e.dataset.bridgeEditFlow)}extractDataFromElement(e){const t=this.getEditFlowFromParent(e.parentElement);if(!t)return null;const i=this.extractDataFromLink(e);return null===i?null:(0,o.Z)((0,o.Z)({},i),{},{link:e,editFlow:t})}selectElementsToOverload(){return Array.from(document.querySelectorAll("[data-bridge-edit-flow] > a")).map((e=>this.extractDataFromElement(e))).filter((e=>null!==e))}}!function(e){e.saved="saved",e.cancel="cancel",e.reload="reload"}(a||(a={})),function(e){e.relaunch="relaunch"}(c||(c={})),(0,o.Z)((0,o.Z)({},a),c);class d{constructor(e,t,i,r){this.mwWindow=e,this.app=t,this.dataBridgeConfig=i,this.eventTracker=r}dispatch(e){const t=function(e,t,i){const r=function(e){r.parent.call(this,e)};e.inheritClass(r,e.ui.Dialog),r.static.name="data-bridge",r.static.escapable=!1,r.prototype.initialize=function(){r.parent.prototype.initialize.call(this),this.content=new e.ui.PanelLayout({padded:!1,expanded:!1}),this.content.$element.attr("id",i),this.$body.append(this.content.$element)},r.prototype.getBodyHeight=function(){return 448};const n=new r({classes:["wb-db-dialog"],size:"medium"}),o=new e.ui.WindowManager;return t(document.body).append(o.$element),o.addWindows([n]),o.openWindow(n),n}(this.mwWindow.OO,this.mwWindow.$,d.APP_DOM_CONTAINER_ID);!function(e,t,i){e.on(a.saved,(()=>{i.location.reload()})),e.on(a.cancel,(()=>{t.clearWindows().catch((()=>{}))})),e.on(a.reload,(()=>{i.location.reload()})),t.on("closing",((e,i)=>{i.then((()=>{t.destroy()}),(e=>{t.destroy()}))}))}(this.app.launch({containerSelector:"#"+d.APP_DOM_CONTAINER_ID},{pageTitle:this.mwWindow.mw.config.get("wgPageName"),entityId:e.entityId,propertyId:e.propertyId,entityTitle:e.entityTitle,editFlow:e.editFlow,client:{usePublish:this.dataBridgeConfig.usePublish,issueReportingLink:this.dataBridgeConfig.issueReportingLink},originalHref:e.link.href,pageUrl:this.mwWindow.location.href,userName:this.mwWindow.mw.config.get("wgUserName")},this.app.createServices(this.mwWindow,this.dataBridgeConfig.editTags,this.eventTracker)),t.getManager(),this.mwWindow)}}d.APP_DOM_CONTAINER_ID="data-bridge-container";class u{constructor(e){this.tracker=e}increment(e){this.tracker("counter."+e,1)}recordTiming(e,t){this.tracker("timing."+e,t)}}class h{constructor(e,t,i){this.tracker=e,this.performance=t,this.visibilityApi=i}startClickDelayTracker(){const e=this.performance.now();return()=>{const t=this.performance.now()-e;this.tracker.recordTiming("clickDelay",t)}}recordTimeToLinkListenersAttached(){if(this.isTabInBackground())return;const e=this.performance.now();if(!this.performance.getEntriesByName||0===this.performance.getEntriesByName("mwStartup").length)return;const t=this.performance.getEntriesByName("mwStartup")[0];this.tracker.recordTiming("timeToLinkListenersAttached",e-t.startTime)}isTabInBackground(){return this.visibilityApi.hidden||this.visibilityApi.msHidden||this.visibilityApi.webkitHidden}}class p{constructor(e,t){this.tracker=e,this.trackingTopicPrefix=t}increment(e){this.tracker.increment(`${this.trackingTopicPrefix}.${e}`)}recordTiming(e,t){this.tracker.recordTiming(`${this.trackingTopicPrefix}.${e}`,t)}}const g="wikibase.client.data-bridge.app";var f=(0,n.Z)((function*(){const e=window,t=e.mw.config.get("wbDataBridgeConfig");if(null===t.hrefRegExp)return void e.mw.log.warn("data bridge config incomplete: dataBridgeHrefRegExp missing");const i=new l(t.hrefRegExp).selectElementsToOverload();if(i.length>0){const r=new p(new u(e.mw.track),"MediaWiki.wikibase.client.databridge"),o=e.mw.loader.using([g,"mw.config.values.wbRepo","mediawiki.ForeignApi","mediawiki.api","jquery.uls.data","mediawiki.language"]).then(function(){var i=(0,n.Z)((function*(i){const n=yield i(g);return new d(e,n,t,r)}));return function(e){return i.apply(this,arguments)}}()),a=new h(r,window.performance,window.document);i.forEach((e=>{let t=!1;e.link.setAttribute("aria-haspopup","dialog"),e.link.addEventListener("click",function(){var i=(0,n.Z)((function*(i){if(i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)return;if(function(e){e.preventDefault(),e.stopPropagation()}(i),t)return;t=!0;const r=a.startClickDelayTracker();(yield o).dispatch(e),r(),t=!1}));return function(e){return i.apply(this,arguments)}}())})),a.recordTimeToLinkListenersAttached(),yield o}}));"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f()},9587:(e,t,i)=>{var r=i(614),n=i(111),o=i(7674);e.exports=function(e,t,i){var a,c;return o&&r(a=t.constructor)&&a!==i&&n(c=a.prototype)&&c!==i.prototype&&o(e,c),e}},7850:(e,t,i)=>{var r=i(111),n=i(4326),o=i(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},8006:(e,t,i)=>{var r=i(6324),n=i(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},4603:(e,t,i)=>{var r=i(9781),n=i(7854),o=i(1702),a=i(4705),c=i(9587),s=i(8880),l=i(3070).f,d=i(8006).f,u=i(7976),h=i(7850),p=i(1340),g=i(7066),f=i(2999),m=i(1320),w=i(7293),E=i(2597),y=i(9909).enforce,v=i(6340),T=i(5112),b=i(9441),k=i(7168),_=T("match"),I=n.RegExp,R=I.prototype,x=n.SyntaxError,D=o(g),O=o(R.exec),N=o("".charAt),P=o("".replace),A=o("".indexOf),S=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,X=/a/g,F=/a/g,C=new I(X)!==X,B=f.MISSED_STICKY,W=f.UNSUPPORTED_Y,j=r&&(!C||B||b||k||w((function(){return F[_]=!1,I(X)!=X||I(F)==F||"/a/i"!=I(X,"i")})));if(a("RegExp",j)){for(var Y=function(e,t){var i,r,n,o,a,l,d=u(R,this),g=h(e),f=void 0===t,m=[],w=e;if(!d&&g&&f&&e.constructor===Y)return e;if((g||u(R,e))&&(e=e.source,f&&(t="flags"in w?w.flags:D(w))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),w=e,b&&"dotAll"in X&&(r=!!t&&A(t,"s")>-1)&&(t=P(t,/s/g,"")),i=t,B&&"sticky"in X&&(n=!!t&&A(t,"y")>-1)&&W&&(t=P(t,/y/g,"")),k&&(e=(o=function(e){for(var t,i=e.length,r=0,n="",o=[],a={},c=!1,s=!1,l=0,d="";r<=i;r++){if("\\"===(t=N(e,r)))t+=N(e,++r);else if("]"===t)c=!1;else if(!c)switch(!0){case"["===t:c=!0;break;case"("===t:O(L,S(e,r+1))&&(r+=2,s=!0),n+=t,l++;continue;case">"===t&&s:if(""===d||E(a,d))throw new x("Invalid capture group name");a[d]=!0,o[o.length]=[d,l],s=!1,d="";continue}s?d+=t:n+=t}return[n,o]}(e))[0],m=o[1]),a=c(I(e,t),d?this:R,Y),(r||n||m.length)&&(l=y(a),r&&(l.dotAll=!0,l.raw=Y(function(e){for(var t,i=e.length,r=0,n="",o=!1;r<=i;r++)"\\"!==(t=N(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),n+=t):n+="[\\s\\S]":n+=t+N(e,++r);return n}(e),i)),n&&(l.sticky=!0),m.length&&(l.groups=m)),e!==w)try{s(a,"source",""===w?"(?:)":w)}catch(e){}return a},G=function(e){e in Y||l(Y,e,{configurable:!0,get:function(){return I[e]},set:function(t){I[e]=t}})},M=d(I),$=0;M.length>$;)G(M[$++]);R.constructor=Y,Y.prototype=R,m(n,"RegExp",Y)}v("RegExp")},8450:(e,t,i)=>{var r=i(7854),n=i(9781),o=i(9441),a=i(4326),c=i(3070).f,s=i(9909).get,l=RegExp.prototype,d=r.TypeError;n&&o&&c(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===a(this))return!!s(this).dotAll;throw d("Incompatible receiver, RegExp required")}}})},4916:(e,t,i)=>{"use strict";var r=i(2109),n=i(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,i,n,o)=>{if(!i){var a=1/0;for(d=0;d<e.length;d++){for(var[i,n,o]=e[d],c=!0,s=0;s<i.length;s++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](i[s])))?i.splice(s--,1):(c=!1,o<a&&(a=o));if(c){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,n,o]},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={410:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[a,c,s]=i,l=0;if(a.some((t=>0!==e[t]))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(s)var d=s(r)}for(t&&t(i);l<a.length;l++)o=a[l],r.o(e,o)&&e[o]&&e[o][0](),e[a[l]]=0;return r.O(d)},i=self.webpackChunkdata_bridge=self.webpackChunkdata_bridge||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=r.O(void 0,[998],(()=>r(4817)));n=r.O(n),module.exports=n})();